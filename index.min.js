r=Math.random;k=9;onkeydown=e=>k=e.which%32;onkeyup=e=>(k=e.which%32==k?9:k);s=[-1,-25,1,25,0];j=[];h=26;p=l=z=0;for(i=0;i<325;i++){x=i%25;y=~~(i/25);j.push((i==27||i==51||i==h)?0:!(y%2)&&!(x%2)||!y||y==12||!x||x==24?1:r()<.4?4:r()<.05?3:0)}o=(e,[x,y],l)=>{for(i=0;i<49;i++)(!i&&l||i&&(+parseInt(e,36).toString(2)[i]^l))&&c.fillRect(x+(i%7),y+~~(i/7),1,1)};f=m=>{for(i=125;i<200;i++)j[i]=0;z=m;h=-1};c.scale(t=Math.min(a.width/175,a.height/91),t);setInterval(()=>{!k&&!p&&(j[h]=2,p=60);!(l%4)&&(g=h+s[k-5]||h,h=!j[g]?g:h);p&&(p--);d=[];m=0;c.clearRect(0,0,175,91);j.map((u,i)=>{u==6&&(j[i]=0);u==3&&(++m)&&!(l%7)&&(g=s[~~(r()*4)],!j[i+g]&&(d.push([i,i+g])));u==2&&p==1&&s.map(n=>(j[i+n]=j[i+n]-1?6:1,i+n==h&&f(1)));o(['','','406VYFBJMK','5E4I8C3K74','2S18HVN1KA','406NVLGBH0','368ZVO5G78'][i==h?5:u],[7*(i%25),7*~~(i/25)],u==1||u==2&&!(l%9))});d.map(u=>(!j[u[1]]&&(j[u[1]]=3,j[u[0]]=0),u[1]==h&&f(1)));!m&&f(2);z&&(c.fillText(z-1?'Win':'Lose',80,49));l++},30)
